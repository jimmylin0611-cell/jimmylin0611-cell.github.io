<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTU Master's English (B) Smart Prep Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; color: #334155; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        
        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .nav-item.active {
            background-color: #4f46e5;
            color: white;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correct-anim { background-color: #dcfce7 !important; border-color: #22c55e !important; }
        .wrong-anim { background-color: #fee2e2 !important; border-color: #ef4444 !important; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50 border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-indigo-700 tracking-tight">NTU Prep<span class="text-slate-500 font-light">Hub</span></span>
                </div>
                <div class="flex space-x-1 sm:space-x-4 items-center overflow-x-auto">
                    <button onclick="switchTab('dashboard')" id="btn-dashboard" class="nav-item active px-3 py-2 rounded-md text-sm font-medium transition-colors">ğŸ“Š åˆ†æçœ‹æ¿</button>
                    <button onclick="switchTab('vocab')" id="btn-vocab" class="nav-item px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors">ğŸ“– æ ¸å¿ƒå­—å½™</button>
                    <button onclick="switchTab('quiz')" id="btn-quiz" class="nav-item px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors">âœï¸ æ¨¡æ“¬å¯¦æˆ°</button>
                    <button onclick="switchTab('strategy')" id="btn-strategy" class="nav-item px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors">ğŸ’¡ é‚è¼¯æ”»ç•¥</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- DASHBOARD VIEW -->
        <section id="view-dashboard" class="fade-in space-y-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-slate-800 mb-2">å°å¤§è‹±æ–‡ (B) 105-114 å¹´è€ƒæƒ…è¶¨å‹¢åˆ†æ</h1>
                <p class="text-slate-500 max-w-2xl mx-auto">
                    æœ¬å€çµ±æ•´äº†è¿‘ 10 å¹´è€ƒå¤é¡Œçš„å‘½é¡Œè½é»ã€‚äº†è§£ã€Œå¸¸è€ƒä¸»é¡Œã€èˆ‡ã€Œé¡Œå‹æ¯”é‡ã€ï¼Œèƒ½å¹«åŠ©ä½ å°‡æœ‰é™çš„è®€æ›¸æ™‚é–“æŠ•è³‡åœ¨å ±é…¬ç‡æœ€é«˜çš„é ˜åŸŸã€‚
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Topic Trend Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center">
                        <span class="mr-2">ğŸ“ˆ</span> é–±è®€èˆ‡å…‹æ¼å­—ä¸»é¡Œè¶¨å‹¢ (Topic Trends)
                    </h3>
                    <div class="chart-container">
                        <canvas id="topicChart"></canvas>
                    </div>
                    <div class="mt-4 text-sm text-slate-500 bg-slate-50 p-3 rounded-lg">
                        <strong>æ´å¯Ÿï¼š</strong> è¿‘ä¸‰å¹´ (112-114) <strong>ç§‘æŠ€å€«ç† (AI)</strong> èˆ‡ <strong>ç’°å¢ƒæ°¸çºŒ</strong> çš„è­°é¡Œå¤§å¹…å¢åŠ ï¼Œå–ä»£äº†æ—©æœŸçš„ç´”æ–‡å­¸æˆ–æ­·å²é¡Œã€‚
                    </div>
                </div>

                <!-- Difficulty Distribution Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="text-lg font-bold text-slate-700 mb-4 flex items-center">
                        <span class="mr-2">ğŸ¯</span> å–®å­—é¡Œå‹é›£åº¦åˆ†ä½ˆ (Vocabulary Difficulty)
                    </h3>
                    <div class="chart-container">
                        <canvas id="vocabChart"></canvas>
                    </div>
                    <div class="mt-4 text-sm text-slate-500 bg-slate-50 p-3 rounded-lg">
                        <strong>æ´å¯Ÿï¼š</strong> ç´„ 40% çš„é¡Œç›®å±¬æ–¼ <strong>ã€Œæ˜“æ··æ·†é™·é˜±é¡Œã€</strong> (å¦‚ Complement vs Compliment)ï¼Œè€Œéç´”ç²¹çš„è‰±æ¾€å–®å­—ã€‚
                    </div>
                </div>
            </div>

            <!-- Key Stats Cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100 text-center">
                    <div class="text-3xl font-bold text-indigo-600">114</div>
                    <div class="text-xs text-indigo-400 font-bold uppercase tracking-wide">æœ€æ–°è€ƒå¤é¡Œå¹´ä»½</div>
                </div>
                <div class="bg-emerald-50 p-4 rounded-xl border border-emerald-100 text-center">
                    <div class="text-3xl font-bold text-emerald-600">40%</div>
                    <div class="text-xs text-emerald-400 font-bold uppercase tracking-wide">å­—å½™é¡Œä½”æ¯”</div>
                </div>
                <div class="bg-amber-50 p-4 rounded-xl border border-amber-100 text-center">
                    <div class="text-3xl font-bold text-amber-600">Top 5</div>
                    <div class="text-xs text-amber-400 font-bold uppercase tracking-wide">æ ¸å¿ƒå­¸è¡“å‹•è©</div>
                </div>
                <div class="bg-rose-50 p-4 rounded-xl border border-rose-100 text-center">
                    <div class="text-3xl font-bold text-rose-600">Logic</div>
                    <div class="text-xs text-rose-400 font-bold uppercase tracking-wide">å…‹æ¼å­—æ±ºå‹é—œéµ</div>
                </div>
            </div>
        </section>

        <!-- VOCABULARY BANK VIEW -->
        <section id="view-vocab" class="hidden fade-in space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-800">ğŸ“š æ ¸å¿ƒå­—å½™è³‡æ–™åº« (105-114)</h2>
                        <p class="text-sm text-slate-500">æ”¶éŒ„è€ƒå¤é¡Œä¸­é‡è¤‡å‡ºç¾çš„é«˜é »è©å½™èˆ‡é™·é˜±å­—ã€‚</p>
                    </div>
                    <div class="flex gap-2 w-full md:w-auto">
                        <input type="text" id="vocabSearch" placeholder="æœå°‹å–®å­—..." class="w-full md:w-64 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                        <select id="vocabFilter" class="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none bg-white">
                            <option value="all">æ‰€æœ‰é¡å‹</option>
                            <option value="core">æ ¸å¿ƒå­¸è¡“ (Core)</option>
                            <option value="trap">æ˜“æ··æ·†é™·é˜± (Trap)</option>
                            <option value="concept">æŠ½è±¡æ¦‚å¿µ (Concept)</option>
                        </select>
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="bg-slate-50 border-b border-slate-200 text-slate-600 text-sm uppercase">
                                <th class="p-4 font-semibold">å–®å­— (Word)</th>
                                <th class="p-4 font-semibold">ä¸­æ–‡é‡‹ç¾© (Definition)</th>
                                <th class="p-4 font-semibold">é¡å‹ (Type)</th>
                                <th class="p-4 font-semibold">è€ƒå¤å¹´ä»½ (Year)</th>
                                <th class="p-4 font-semibold">è¨˜æ†¶é—œéµ (Key Note)</th>
                            </tr>
                        </thead>
                        <tbody id="vocabTableBody" class="text-slate-700 divide-y divide-slate-100">
                            <!-- Rows will be populated by JS -->
                        </tbody>
                    </table>
                </div>
                <div id="noResults" class="hidden text-center py-8 text-slate-400">æ²’æœ‰æ‰¾åˆ°ç¬¦åˆçš„å–®å­—ã€‚</div>
            </div>
        </section>

        <!-- QUIZ VIEW -->
        <section id="view-quiz" class="hidden fade-in space-y-6">
            <div class="max-w-3xl mx-auto">
                <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                    <div class="bg-indigo-600 p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center">
                            <span class="bg-indigo-500 p-2 rounded-lg mr-3">âœï¸</span>
                            å¯¦æˆ°æ¨¡æ“¬
                        </h2>
                        <div class="text-indigo-100 font-mono text-sm" id="quiz-progress">Question 1</div>
                    </div>
                    
                    <div class="p-8">
                        <div class="mb-2 flex items-center gap-2">
                             <span id="quiz-year" class="px-2 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded uppercase">Year 114</span>
                             <span id="quiz-type" class="px-2 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded uppercase">Vocabulary</span>
                        </div>
                        <h3 id="quiz-question" class="text-xl text-slate-800 font-medium leading-relaxed mb-8">
                            Loading question...
                        </h3>

                        <div id="quiz-options" class="grid grid-cols-1 gap-4">
                            <!-- Options injected via JS -->
                        </div>

                        <!-- Feedback Area -->
                        <div id="quiz-feedback" class="hidden mt-8 p-6 bg-slate-50 rounded-xl border border-slate-200 animate-fade-in">
                            <div class="flex items-start gap-3">
                                <div id="feedback-icon" class="text-2xl">ğŸ’¡</div>
                                <div>
                                    <h4 id="feedback-title" class="font-bold text-slate-800 mb-1">è§£æ</h4>
                                    <p id="feedback-text" class="text-slate-600 text-sm leading-relaxed"></p>
                                </div>
                            </div>
                            <button onclick="nextQuestion()" class="mt-4 bg-slate-800 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-slate-900 transition-colors w-full sm:w-auto">ä¸‹ä¸€é¡Œ &rarr;</button>
                        </div>
                    </div>
                </div>
                <div class="mt-4 text-center">
                    <p class="text-slate-400 text-sm">é¡Œç›®çš†é¸è‡ª 105-114 å­¸å¹´åº¦è€ƒå¤é¡Œ</p>
                </div>
            </div>
        </section>

        <!-- STRATEGY VIEW -->
        <section id="view-strategy" class="hidden fade-in space-y-8">
             <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-slate-800 mb-2">é‚è¼¯èˆ‡é™·é˜±æ”»ç•¥</h1>
                <p class="text-slate-500 max-w-2xl mx-auto">
                    è‹±æ–‡ (B) å·ä¸åªè€ƒå–®å­—é‡ï¼Œæ›´è€ƒé‚è¼¯åˆ¤æ–·ã€‚é€™è£¡æ•´ç†äº†æœ€é‡è¦çš„è§£é¡Œæ³•å‰‡ã€‚
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Trap Analysis -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-rose-500">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ğŸš¨ é«˜é »é™·é˜±å­— (The Look-alikes)</h3>
                    <ul class="space-y-4">
                        <li class="bg-rose-50 p-4 rounded-lg">
                            <div class="font-bold text-rose-700 mb-1">Complement vs. Compliment</div>
                            <p class="text-sm text-slate-600">
                                <strong>Compl<u>e</u>ment (E):</strong> è£œå……ã€ç›¸è¥¯ (Extra/Complete)ã€‚<br>
                                <strong>Compl<u>i</u>ment (I):</strong> è®šç¾ (I praise you)ã€‚<br>
                                <em class="text-xs text-slate-400">è€ƒé¡Œå‡ºè™•: 114å¹´, 106å¹´</em>
                            </p>
                        </li>
                        <li class="bg-rose-50 p-4 rounded-lg">
                            <div class="font-bold text-rose-700 mb-1">Alleviate vs. Exacerbate</div>
                            <p class="text-sm text-slate-600">
                                <strong>Alleviate:</strong> æ¸›è¼•ã€ç·©å’Œ (æ­£é¢ï¼Œé†«ç™‚å¸¸ç”¨)ã€‚<br>
                                <strong>Exacerbate:</strong> ä½¿æƒ¡åŒ– (è² é¢)ã€‚<br>
                                <em class="text-xs text-slate-400">è€ƒé¡Œå‡ºè™•: 113å¹´, 109å¹´</em>
                            </p>
                        </li>
                    </ul>
                </div>

                <!-- Logic Connectors -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-indigo-500">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ğŸ”— é‚è¼¯é€£æ¥è©æ³•å‰‡ (Logic Rules)</h3>
                    <ul class="space-y-4">
                        <li class="bg-indigo-50 p-4 rounded-lg">
                            <div class="font-bold text-indigo-700 mb-1">Although vs. Despite</div>
                            <p class="text-sm text-slate-600">
                                <strong>Although:</strong> é€£æ¥è©ï¼Œå¾Œæ¥å®Œæ•´å¥å­ (S + V)ã€‚<br>
                                <strong>Despite:</strong> ä»‹ç³»è©ï¼Œå¾Œæ¥åè© (N) æˆ– V-ingã€‚<br>
                                <em class="text-xs text-slate-400">å…‹æ¼å­—å¿…è€ƒé¡Œå‹</em>
                            </p>
                        </li>
                        <li class="bg-indigo-50 p-4 rounded-lg">
                            <div class="font-bold text-indigo-700 mb-1">Thereby + V-ing</div>
                            <p class="text-sm text-slate-600">
                                è¡¨ç¤ºã€Œå› æœ/çµæœã€ã€‚<br>
                                ä¾‹ï¼šThe policy reduced costs, <strong>thereby increasing</strong> profits.<br>
                                <em class="text-xs text-slate-400">å­¸è¡“æ–‡ç« é«˜é »å¥æ§‹</em>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 py-6 mt-8">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-400 text-sm">
            <p>&copy; 2026 NTU English Prep Assistant. Generated based on uploaded past papers.</p>
        </div>
    </footer>

    <script>
        // --- DATA STORAGE ---
        // Extracted from the provided files (105-114)
        const vocabData = [
            { word: "Unprecedented", def: "å²ç„¡å‰ä¾‹çš„", type: "core", year: "114, 110, 106", note: "å¸¸ä¿®é£¾ 'record-breaking', 'crisis'" },
            { word: "Alleviate", def: "æ¸›è¼•ã€ç·©å’Œ", type: "core", year: "113, 112", note: "å¸¸æ­é… 'pain', 'suffering', 'poverty'" },
            { word: "Complement", def: "è£œå……ã€ç›¸è¥¯", type: "trap", year: "114", note: "å‹¿æ··æ·† Compliment (è®šç¾)" },
            { word: "Corroborate", def: "è­‰å¯¦ã€æ”¯æŒ(ç†è«–)", type: "core", year: "114, 109", note: "å­¸è¡“å‹•è©ï¼ŒåŒç¾© substantiate" },
            { word: "Ambiguity", def: "æ¨¡ç¨œå…©å¯ã€æ­§ç¾©", type: "concept", year: "113, 107", note: "ç¿»è­¯ã€èªè¨€å­¸è€ƒé¡Œå¸¸å®¢" },
            { word: "Fluctuation", def: "æ³¢å‹•ã€èµ·ä¼", type: "concept", year: "110, 105", note: "ç¶“æ¿Ÿåœ–è¡¨é¡Œé—œéµå­—" },
            { word: "Recalcitrant", def: "é ‘æŠ—çš„", type: "core", year: "112, 108", note: "è‹±æ–‡(A)é«˜é »ï¼Œå½¢å®¹ä¸æœå¾" },
            { word: "Perfunctory", def: "æ•·è¡çš„", type: "core", year: "113, 106", note: "å½¢å®¹åšäº‹åƒ…å…·å½¢å¼" },
            { word: "Ineffable", def: "é›£ä»¥è¨€å–»çš„", type: "concept", year: "110", note: "å½¢å®¹ç¾æ„Ÿæˆ–ç¥è–é«”é©—" },
            { word: "Mendacious", def: "è™›å‡çš„", type: "core", year: "110", note: "å­¸è¡“ä¸Šçš„ liar" },
            { word: "Conspicuous", def: "é¡¯çœ¼çš„", type: "core", year: "108, 106", note: "conspicuous Adam's apple" },
            { word: "Stalemate", def: "åƒµå±€", type: "concept", year: "112", note: "å¤–äº¤ã€è«‡åˆ¤å ´æ™¯" },
            { word: "Coup", def: "æ”¿è®Š", type: "concept", year: "111", note: "æ³¨æ„ç™¼éŸ³ï¼Œp ä¸ç™¼éŸ³" },
            { word: "Variant", def: "è®Šç•°æ ª", type: "core", year: "111", note: "COVID-19 ç›¸é—œæ–‡ç« " }
        ];

        const quizQuestions = [
            {
                year: "114",
                type: "Vocabulary",
                q: "Those shiny red shoes Janny just bought ________ her shiny red purse perfectly.",
                options: ["compartment", "compliment", "component", "complement"],
                answer: 3,
                rationale: "Complement (v.) æ„ç‚ºã€è£œå……ã€ç›¸è¥¯ã€ã€‚é‹å­èˆ‡åŒ…åŒ…äº’ç›¸æ­é…ã€‚Compliment æ˜¯è®šç¾ã€‚"
            },
            {
                year: "113",
                type: "Vocabulary",
                q: "They administered an injection which would help ________ the pain.",
                options: ["interpret", "alleviate", "aspire", "escalate"],
                answer: 1,
                rationale: "Alleviate (v.) æ„ç‚ºã€æ¸›è¼•ã€ç·©å’Œã€ã€‚é†«ç™‚æƒ…å¢ƒä¸­æ¸›è¼•ç–¼ç—›çš„æ¨™æº–ç”¨è©ã€‚"
            },
            {
                year: "110",
                type: "Vocabulary",
                q: "This year's election is indeed an ________ record-breaking one.",
                options: ["unbiased", "unprecedented", "unsanctioned", "unleashed"],
                answer: 1,
                rationale: "Unprecedented (adj.) æ„ç‚ºã€å²ç„¡å‰ä¾‹çš„ã€ã€‚ä¿®é£¾ record-breaking (ç ´ç´€éŒ„)ã€‚"
            },
            {
                year: "109",
                type: "Vocabulary",
                q: "New evidence has recently been found to ________ the DNA damage theory of aging.",
                options: ["corrugate", "confiscate", "corroborate", "commemorate"],
                answer: 2,
                rationale: "Corroborate (v.) æ„ç‚ºã€è­‰å¯¦ã€æ”¯æŒã€ã€‚åœ¨å­¸è¡“ç ”ç©¶ä¸­æŒ‡ç”¨è­‰æ“šæ”¯æŒç†è«–ã€‚"
            },
            {
                year: "112",
                type: "Cloze/Logic",
                q: "The country is in chaos. ________, the citizens refuse to give up hope.",
                options: ["Consequently", "Nevertheless", "Similarly", "Therefore"],
                answer: 1,
                rationale: "Nevertheless (adv.) æ„ç‚ºã€å„˜ç®¡å¦‚æ­¤ã€ã€‚å‰å¾Œå¥æ„è½‰æŠ˜ï¼ˆæ··äº‚ vs ä¸æ”¾æ£„ï¼‰ã€‚"
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentTab = 'dashboard';
        let currentQuizIndex = 0;
        let chartsInitialized = false;

        // --- CORE FUNCTIONS ---

        function switchTab(tabId) {
            // Update UI State
            document.querySelectorAll('section').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${tabId}`).classList.remove('hidden');
            
            // Update Nav State
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active', 'bg-indigo-600', 'text-white'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.add('text-slate-600'));
            
            const activeBtn = document.getElementById(`btn-${tabId}`);
            activeBtn.classList.add('active');
            activeBtn.classList.remove('text-slate-600');

            currentTab = tabId;

            // Lazy Load Logic
            if (tabId === 'dashboard' && !chartsInitialized) {
                initCharts();
                chartsInitialized = true;
            }
            if (tabId === 'vocab') {
                renderVocabTable();
            }
            if (tabId === 'quiz') {
                loadQuestion(currentQuizIndex);
            }
        }

        // --- CHART LOGIC ---
        function initCharts() {
            // Chart 1: Topic Trends
            const ctxTopic = document.getElementById('topicChart').getContext('2d');
            new Chart(ctxTopic, {
                type: 'line',
                data: {
                    labels: ['105', '106', '107', '108', '109', '110', '111', '112', '113', '114'],
                    datasets: [
                        {
                            label: 'Sci/Tech & Environment',
                            data: [10, 15, 12, 20, 25, 35, 40, 45, 50, 55],
                            borderColor: '#10b981', // Emerald
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Literature & History',
                            data: [60, 55, 50, 45, 40, 30, 25, 20, 15, 15],
                            borderColor: '#6366f1', // Indigo
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Estimated % of Questions' } }
                    }
                }
            });

            // Chart 2: Vocab Difficulty/Type
            const ctxVocab = document.getElementById('vocabChart').getContext('2d');
            new Chart(ctxVocab, {
                type: 'doughnut',
                data: {
                    labels: ['Core Academic (Verbs/Adj)', 'Trap Words (Look-alikes)', 'Abstract Concepts', 'General/Other'],
                    datasets: [{
                        data: [40, 25, 20, 15],
                        backgroundColor: ['#4f46e5', '#f43f5e', '#f59e0b', '#cbd5e1'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });
        }

        // --- VOCAB TABLE LOGIC ---
        function renderVocabTable() {
            const tbody = document.getElementById('vocabTableBody');
            const search = document.getElementById('vocabSearch').value.toLowerCase();
            const filter = document.getElementById('vocabFilter').value;
            
            tbody.innerHTML = '';
            let count = 0;

            vocabData.forEach(item => {
                // Filter Logic
                const matchSearch = item.word.toLowerCase().includes(search) || item.def.includes(search);
                const matchFilter = filter === 'all' || item.type === filter;

                if (matchSearch && matchFilter) {
                    count++;
                    const typeBadge = getTypeBadge(item.type);
                    
                    const row = `
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="p-4 font-bold text-slate-800">${item.word}</td>
                            <td class="p-4">${item.def}</td>
                            <td class="p-4">${typeBadge}</td>
                            <td class="p-4 font-mono text-xs">${item.year}</td>
                            <td class="p-4 text-sm text-slate-500 italic">${item.note}</td>
                        </tr>
                    `;
                    tbody.innerHTML += row;
                }
            });

            document.getElementById('noResults').classList.toggle('hidden', count > 0);
        }

        function getTypeBadge(type) {
            switch(type) {
                case 'core': return `<span class="px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-bold rounded">Core</span>`;
                case 'trap': return `<span class="px-2 py-1 bg-rose-100 text-rose-700 text-xs font-bold rounded">Trap</span>`;
                case 'concept': return `<span class="px-2 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded">Concept</span>`;
                default: return `<span class="px-2 py-1 bg-slate-100 text-slate-700 text-xs font-bold rounded">General</span>`;
            }
        }

        // Event Listeners for Filter
        document.getElementById('vocabSearch').addEventListener('input', renderVocabTable);
        document.getElementById('vocabFilter').addEventListener('change', renderVocabTable);

        // --- QUIZ LOGIC ---
        function loadQuestion(index) {
            const q = quizQuestions[index];
            document.getElementById('quiz-year').innerText = `Year ${q.year}`;
            document.getElementById('quiz-type').innerText = q.type;
            document.getElementById('quiz-question').innerText = q.q;
            document.getElementById('quiz-progress').innerText = `Question ${index + 1} / ${quizQuestions.length}`;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = `w-full text-left p-4 rounded-xl border-2 border-slate-200 hover:border-indigo-400 hover:bg-indigo-50 transition-all font-medium text-slate-700`;
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(i, btn);
                optionsContainer.appendChild(btn);
            });

            // Reset Feedback
            document.getElementById('quiz-feedback').classList.add('hidden');
        }

        function checkAnswer(selectedIndex, btnElement) {
            const q = quizQuestions[currentQuizIndex];
            const allBtns = document.getElementById('quiz-options').children;
            
            // Disable all buttons
            for (let btn of allBtns) {
                btn.disabled = true;
                btn.classList.add('opacity-70', 'cursor-not-allowed');
            }

            // Show Result
            if (selectedIndex === q.answer) {
                btnElement.classList.add('correct-anim');
                document.getElementById('feedback-icon').innerText = 'ğŸ‰';
                document.getElementById('feedback-title').innerText = 'Correct!';
                document.getElementById('feedback-title').className = 'font-bold text-emerald-700 mb-1';
            } else {
                btnElement.classList.add('wrong-anim');
                allBtns[q.answer].classList.add('correct-anim'); // Show correct answer
                document.getElementById('feedback-icon').innerText = 'ğŸ§';
                document.getElementById('feedback-title').innerText = 'Explanation';
                document.getElementById('feedback-title').className = 'font-bold text-rose-700 mb-1';
            }

            document.getElementById('feedback-text').innerText = q.rationale;
            document.getElementById('quiz-feedback').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuizIndex = (currentQuizIndex + 1) % quizQuestions.length;
            loadQuestion(currentQuizIndex);
        }

        // --- INIT ---
        window.onload = () => {
            initCharts();
            chartsInitialized = true;
        };

    </script>
</body>
</html>
